<html>
  <body
    style="
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Arial, sans-serif;
      font-size: 16px;
      line-height: 1.5;
      color: #333;
      background-color: #f5f5f5;
    "
  >
    <div
      class="container"
      style="
        width: 100%;
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 10px;
        background-color: #f5f5f5;
      "
    >
      <!-- Header -->
      <div>
        <img
          src="{{ .AppInfo.LogoURL }}"
          alt="{{ .AppInfo.Name }}"
          style="width: 100px; height: 100px; object-fit: contain"
        />
        <h1>Purchase</h1>
        <p>Hi, <b>{{ .Transaction.Email }}</b>. Thank you for your purchase.</p>
        <p>
          <a href="{{ .URL }}" style="color: #336dff; text-decoration: none"
            >TRX <b>{{ .Transaction.ID }}</b></a
          >
        </p>
      </div>

      <!-- Stuff -->
      {{ if .Transaction.Stuffs }}
      <div>
        <h2>Your Purchased Stuff</h2>
        <table
          style="width: 100%; border-collapse: collapse; margin-bottom: 20px"
        >
          <thead>
            <tr>
              <th
                style="
                  padding: 10px;
                  border: 1px solid #ccc;
                  background-color: #336dff;
                  color: #fff;
                  text-align: left;
                "
              >
                Name
              </th>
              <th
                style="
                  padding: 10px;
                  border: 1px solid #ccc;
                  background-color: #336dff;
                  color: #fff;
                  text-align: left;
                "
              >
                Quantity
              </th>
              <th
                style="
                  padding: 10px;
                  border: 1px solid #ccc;
                  background-color: #336dff;
                  color: #fff;
                  text-align: left;
                "
              >
                Price
              </th>
            </tr>
          </thead>
          <tbody>
            {{ range .Transaction.Stuffs }}
            <tr>
              <td style="padding: 10px; border: 1px solid #ccc">
                {{ .StuffName }}
              </td>
              <td style="padding: 10px; border: 1px solid #ccc">
                {{ .Quantity }}
              </td>
              <td style="padding: 10px; border: 1px solid #ccc">
                {{ .Currency }} {{ .TotalPrice }}
              </td>
            </tr>
            {{ end }}
            <tr>
              <td
                colspan="2"
                style="padding: 10px; border: 1px solid #ccc; font-weight: bold"
              >
                Total
              </td>
              <td
                style="padding: 10px; border: 1px solid #ccc; font-weight: bold"
              >
                {{ .Transaction.Currency }} {{ .Transaction.Amount }}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      {{ end }}

      <!-- Payment -->
      {{ if eq .Transaction.Status "pending" }}
      <div>
        <h2>Payment</h2>
        <p>Please pay before {{ .ExpiresAt }}</p>
        <p>
          <a
            href="{{ .Transaction.Payment.URL }}"
            style="
              display: inline-block;
              background-color: #336dff;
              color: #fff;
              padding: 5px 20px;
              border-radius: 5px;
              text-decoration: none;
            "
            >Pay with {{ .Transaction.Payment.Provider }}</a
          >
        </p>
      </div>
      {{ else if eq .Transaction.Status "success" }}
      <div>
        <h2>Stuff Data</h2>
        <a href="{{ .URL }}" style="color: #336dff; text-decoration: none"
          >View on website</a
        >
        <div>
          {{ range .Transaction.Stuffs }}
          <!-- If data is not nil, show the stuff data -->
          {{ if .Data }}
          <div>
            <h3>{{ .Quantity }}x {{ .StuffName }}</h3>
            <p>Separator: {{ .Data.Separator }}</p>
            <code
              style="
                display: block;
                white-space: pre-wrap;
                word-break: break-all;
                padding: 10px;
                background-color: #f5f5f5;
                border-radius: 5px;
                border: 1px solid #ccc;
              "
              >{{ .Data.Values }}</code
            >
          </div>
          {{ end }}
          <!-- If data is nil, show the stuff name and quantity -->
          {{ else }}
          <div>
            <h3>{{ .Quantity }}x {{ .StuffName }}</h3>
            <p>No data available</p>
          </div>
          {{ end }}
        </div>
      </div>
      {{ else if eq .Transaction.Status "failed" }}
      <div>
        <h2>Payment</h2>
        <p>Your payment has been failed.</p>
      </div>
      {{ else }}
      <div>
        <h2>Payment</h2>
        <p>Your payment status is unknown.</p>
      </div>
      {{ end }}

      <!-- Footer -->
      <hr style="border: 1px solid #ccc; margin: 20px 0" />
      <div>
        <p>Thank you for your purchase.</p>
        <p>Best regards,</p>
        <p>{{ .AppInfo.Name }}</p>
      </div>
    </div>
  </body>
</html>
